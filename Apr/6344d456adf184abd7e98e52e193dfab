US President Donald Trump pilloried the Iran nuclear deal as "insane" Tuesday and threatened "problems" if Tehran restarts enrichment, puncturing a carefully staged display of transatlantic camaraderie with France's visiting leader Emmanuel Macron. Trump launched into an angry tirade against the three-year old nuclear accord as he hosted the French president in the Oval Office, exposing a deep rift with European allies who are trying to stop him from walking away from the deal. The US leader groused that the agreement -- inked by the United States, Iran, Europe, Russia and China -- does nothing to tackle Tehran's ballistic missiles program or support for militant groups across the Middle East. "People know my views on the Iran deal. It was a terrible deal. It should have never ever been made," Trump railed. "It's insane. It's ridiculous." The agreement, still backed by Europe, gave Iran massive sanctions relief and the guarantee of a civilian nuclear program in return for curbs on programs that could be used to develop a nuke. It did not tackle western complains about Iran's ballistic missile programs or support for militant groups across the Middle East. After years of rubbishing the deal, Trump faces a May 12 deadline to decide on its fate and is demanding changes that European capitals believe would represent a legal breach. Iran, meanwhile, has warned it will ramp up enrichment activities if Trump walks away from the accord, prompting Trump to issue a blunt warning. "They're not going to be restarting anything. If they restart it, they're going to have big problems, bigger than they ever had before. And you can mark it down," he said. - Simmering tensions - Macron is in Washington on a landmark state visit, in part, to convince Trump not to pull out of the deal and scuttle years-worth of hard won diplomatic gains. "The Iran deal is an important issue but we have to take a far broader picture which is security in the overall region," he said Tuesday at the White House. "What we want to do is to contain Iran and its presence in the region." That message is likely to be repeated on Friday, when Trump hosts German Chancellor Angela Merkel, who is equally keen to save the deal. For months American and European officials have been working behind the scenes to trying to find a compromise over Trump's demands to change the agreement. Officials have toyed with the idea of a separate joint declaration: promising to tackle non-nuclear issues, while searching for a tougher successor agreement. The challenge, they say, is to find a solution that allows the mercurial US president to claim a public victory, while keeping the deal intact. More hawkish American officials accuse Europeans -- particularly Germany -- of putting business interests ahead of security, and of opposing a tougher stance against Iran to safeguard investments in the Islamic Republic. That charge is sharply rejected by European officials, who are increasingly frustrated at spending time dealing with Trump's complaints rather than tackling Iran's behavior, the impact of which is much more keenly felt on the continent than in the United States. The disagreement threatens to plunge transatlantic relations to their lowest point since the Iraq War. Trump comments contrasted markedly with the red carpet roll out that Macron received at the White House. Earlier Tuesday both men waxed lyrical about shared heroes of yore -- from the Marquis de Lafayette to Alexis de Tocqueville -- and listened to strains of "La Marseillaise" and "The Star-Spangled Banner" echoing around the South Lawn of the White House. "The wonderful friendship we have developed over the last year is a testament to the enduring friendship that binds our two nations," Trump glowed. In the Oval Office, Trump offered another, slightly awkward sign of their intimacy. "We have a very special relationship, in fact I'll get that little piece of dandruff off," Trump said, swiping something off Macron's jacket. "We have to make him perfect -- he is perfect." Observers are uncertain that Macron can translate the privileged relationship into concrete results. There are also problems in the economic sphere, with Macron and Merkel both trying to secure a permanent exemption for Europe from US steel and aluminum tariffs. Trump complained about having to do trade "deals" with the European Union as a bloc, rather than individual states like France.